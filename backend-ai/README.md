# Backend AI - DzTruth

## نظام الكشف عن الأخبار الزائفة بالدارجة الجزائرية

هذا هو الـ Backend الخاص بمنصة DzTruth، والذي يستخدم نموذج SVM للكشف عن الأخبار الزائفة المكتوبة بالدارجة الجزائرية.

## المتطلبات

- Python 3.8 أو أحدث
- pip (مدير حزم Python)

## التثبيت

### 1. تثبيت المكتبات المطلوبة

```bash
pip install -r requirements.txt
```

أو يمكنك تثبيتها يدوياً:

```bash
pip install flask joblib scikit-learn deep-translator
```

### 2. التحقق من الملفات

تأكد من وجود الملفات التالية في المجلد:
- `app.py` - خادم Flask
- `processe.py` - معالجة النصوص
- `svm_model.pkl` - نموذج SVM المدرب
- `vectorizer.pkl` - Vectorizer للنصوص

## التشغيل

```bash
python app.py
```

الخادم سيعمل على: `http://localhost:5000`

## API Endpoint

### POST /predict

**الطلب:**
```json
{
  "text": "النص المراد فحصه بالدارجة الجزائرية"
}
```

**الاستجابة:**
```json
{
  "prediction": "Fake" | "True",
  "processed_text": "النص بعد المعالجة"
}
```

## كيف يعمل النظام؟

### 1. معالجة النص (`processe.py`)

يقوم النظام بمعالجة النص من خلال:

1. **تطبيع الأحرف العربية** - إزالة التشكيل وتوحيد الأحرف
2. **تطبيع Arabizi** - تحويل الأرقام المستخدمة في الدارجة (3, 7, 9, إلخ)
3. **تحويل الدارجة** - تحويل كلمات الدارجة إلى العربية الفصحى
4. **الترجمة** - ترجمة النص إلى الإنجليزية باستخدام Google Translator

### 2. التصنيف (`app.py`)

1. يتم استقبال النص من الـ Frontend
2. معالجة النص باستخدام `preprocess_darija()`
3. تحويل النص إلى Vector باستخدام `vectorizer.pkl`
4. التنبؤ باستخدام نموذج `svm_model.pkl`
5. إرجاع النتيجة (Fake أو True)

## معالجة الدارجة الجزائرية

النظام يتعرف على الكلمات التالية ويحولها:

| الدارجة | الفصحى |
|---------|--------|
| راك | انت |
| راكم | انتم |
| راهو | انه |
| علاه/علاش | لماذا |
| بزاف | كثير |
| واش | ماذا |
| شحال | كم |
| مليح | جيد |
| ليوم | اليوم |
| البارح | امس |

## حل المشاكل

### مشكلة: ModuleNotFoundError

**الحل:**
```bash
pip install -r requirements.txt
```

### مشكلة: FileNotFoundError (model files)

**الحل:** تأكد من وجود ملفات النموذج:
- `svm_model.pkl`
- `vectorizer.pkl`

### مشكلة: Port already in use

**الحل:** غير المنفذ في `app.py`:
```python
app.run(host="0.0.0.0", port=5001)  # استخدم منفذ آخر
```

## البنية

```
backend-ai/
├── app.py              # خادم Flask الرئيسي
├── processe.py         # معالجة النصوص
├── svm_model.pkl       # نموذج SVM المدرب
├── vectorizer.pkl      # TF-IDF Vectorizer
├── requirements.txt    # المكتبات المطلوبة
├── README.md           # هذا الملف
└── Untitled0.ipynb     # Notebook التدريب (اختياري)
```

## المكتبات المستخدمة

- **Flask** - إطار عمل الويب
- **joblib** - تحميل النماذج المحفوظة
- **scikit-learn** - نموذج SVM والـ Vectorizer
- **deep-translator** - ترجمة النصوص

## الاستخدام مع Frontend

تأكد من:
1. تشغيل Backend على المنفذ 5000
2. Frontend يشير إلى `http://localhost:5000` في ملف `.env.local`

```
BACKEND_AI_URL=http://localhost:5000
```

## ملاحظات

- النموذج مدرب على نصوص بالدارجة الجزائرية
- الدقة تعتمد على جودة البيانات المستخدمة في التدريب
- يُنصح بتحديث النموذج بشكل دوري بإضافة بيانات جديدة

## المساهمة

لتحسين النموذج:
1. جمع المزيد من النصوص بالدارجة الجزائرية
2. تصنيفها (Fake/True)
3. إعادة تدريب النموذج
4. حفظ النموذج الجديد

---

**تم التطوير بـ ❤️ في الجزائر**
